---
description: MCP server configuration and integration guidelines for Cursor IDE
alwaysApply: true
---

# üîå MCP Server Configuration

**‚ö†Ô∏è CRITICAL: MCP Configuration for Cursor IDE Integration ‚ö†Ô∏è**

## Current MCP Servers

The workspace is configured with **4 MCP servers** in `.cursor/mcp.json`:

1. **advisor** - DevWisdom Go MCP Server (Crew Role: Advisor)
   - Command: `/Users/davidl/Projects/devwisdom-go/devwisdom`
   - Provides: Wisdom quotes, trusted advisors, inspirational guidance

2. **researcher** - Context7 MCP Server (Crew Role: Researcher)
   - Command: `npx`
   - Args: `["-y", "@upstash/context7-mcp"]`
   - Provides: Advanced context management and retrieval

3. **analyst** - Tractatus Thinking MCP Server (Crew Role: Analyst)
   - Command: `npx`
   - Args: `["-y", "tractatus_thinking"]`
   - Provides: Structured reasoning and logical thinking

4. **exarp-go** - Go-based MCP Server (Crew Role: Executor) ‚úÖ **ACTIVE**
   - Command: `/Users/davidl/Projects/exarp-go/bin/exarp-go`
   - Args: `[]`
   - Env: `PROJECT_ROOT={{PROJECT_ROOT}}`
   - Provides: 24 tools, 15 prompts, 6 resources
   - Status: Native Go implementation with Python bridge for remaining tools

## Configuration Guidelines

### Server Configuration Format
```json
{
  "mcpServers": {
    "server-name": {
      "command": "path/to/binary",
      "args": ["arg1", "arg2"],
      "env": {
        "VAR_NAME": "value",
        "PROJECT_ROOT": "{{PROJECT_ROOT}}"
      },
      "description": "Human-readable description"
    }
  }
}
```

### Environment Variables
- **PROJECT_ROOT**: Always use `{{PROJECT_ROOT}}` for workspace path substitution
- **Custom vars**: Add project-specific environment variables as needed
- **No secrets**: Never commit API keys or secrets to config file

### Transport Protocol
- **STDIO**: Recommended for Cursor IDE integration
- **JSON-RPC 2.0**: Standard protocol for MCP communication
- **No HTTP/SSE**: Cursor uses STDIO transport exclusively

## Server Development Guidelines

### Binary Location
- **Development**: Build binary to `bin/exarp-go`
- **Production**: Install to system PATH or use absolute path
- **Testing**: Use relative path during development, absolute path in config

### Error Handling
- **Startup errors**: Log to stderr, exit with non-zero code
- **Runtime errors**: Return JSON-RPC error responses
- **Connection errors**: Cursor will retry automatically

### Logging
- **Stderr**: Use for error logs and diagnostics
- **Stdout**: Reserved for JSON-RPC communication
- **No file logging**: Rely on Cursor's log capture

## Integration Testing

### Manual Testing
```bash
# Test server startup
./bin/exarp-go

# Test with MCP client
# Use Cursor's MCP inspector or external client
```

### Cursor Integration
1. **Restart Cursor** after config changes
2. **Check MCP status** in Cursor settings
3. **Test tool invocation** via chat interface
4. **Verify resources** are accessible

## Migration Notes

### From Python to Go
- **Binary path**: Update from Python script to Go binary
- **Command format**: Change from `uv run python -m mcp_stdio_tools.server` to binary path
- **Environment**: Same environment variables, different execution model
- **Compatibility**: Maintain same tool/prompt/resource interfaces

### Framework-Agnostic Design
- **Configuration**: Framework selection via config file
- **No hard dependencies**: Core code independent of framework
- **Easy switching**: Change framework without code changes
- **Testing**: Mock adapters for unit testing

## Troubleshooting

### Common Issues
1. **Server not found**: Check binary path is correct
2. **Permission denied**: Ensure binary is executable (`chmod +x`)
3. **Connection failed**: Verify server starts without errors
4. **Tools not available**: Check server logs for registration errors

### Debug Steps
1. **Test binary directly**: Run binary manually to check for errors
2. **Check Cursor logs**: View MCP server logs in Cursor settings
3. **Validate JSON**: Ensure `.cursor/mcp.json` is valid JSON
4. **Restart Cursor**: Required after config changes

## Best Practices

### Configuration Management
- ‚úÖ **Version control**: Commit `.cursor/mcp.json` to repository
- ‚úÖ **Documentation**: Document each server's purpose and usage
- ‚úÖ **Validation**: Validate JSON syntax before committing
- ‚úÖ **Testing**: Test each server independently before adding to config

### Server Development
- ‚úÖ **Error handling**: Graceful error handling and reporting
- ‚úÖ **Logging**: Clear, actionable error messages
- ‚úÖ **Testing**: Comprehensive test coverage
- ‚úÖ **Documentation**: Clear API documentation for tools/prompts/resources

### Integration
- ‚úÖ **Compatibility**: Maintain backward compatibility during migration
- ‚úÖ **Testing**: Test all tools/prompts/resources after changes
- ‚úÖ **Monitoring**: Monitor server health and performance
- ‚úÖ **Updates**: Keep servers updated with latest versions
